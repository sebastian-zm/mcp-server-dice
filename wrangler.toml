name = "dice-mcp-server"
main = "src/index.ts"
compatibility_date = "2024-12-04"
compatibility_flags = ["nodejs_compat"]

# KV Namespace - will be created during setup
[[kv_namespaces]]
binding = "DICE_KV"
id = "c87cf7076b9f4d1793bccc59a9f762cd"

# Durable Objects binding
[[durable_objects.bindings]]
name = "DICE_MCP"
class_name = "DiceMCP"

# Migration for SQLite-backed Durable Objects (Works on FREE plan!)
[[migrations]]
tag = "v1"
new_sqlite_classes = ["DiceMCP"]  # This enables SQLite storage

# Optional: Custom domain configuration
[env.production]
routes = [
  { pattern = "dice.sebastian.software/*", zone_name = "sebastian.software" }
]

# Development settings
[dev]
port = 8787
local_protocol = "http"
